import{n as _,d as a,e as t,t as d,k as m,s as u,h as l,f as p,w as f,F as g,p as b,l as k,v,j as w,o as r,i as L}from"./app-D-UODoHf.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={name:"postdetail",data(){return{postId:0,csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),post:{},posts:{},comments:{},newcomment:{body:"",post_id:""},postLikeData:{id:null,_token:document.querySelector('meta[name="csrf-token"]').getAttribute("content")},postUrl:"",liked:!1,user:this.$store.state.auth.user,authorization:this.$store.state.auth.authorization}},async created(){const e=this.$route.params.slug;await axios.get("/api/post/".concat(e)).then(({data:n})=>{this.posts=n.data,this.newcomment.post_id=n.data.id,this.postLikeData.id=n.data.id,this.postId=n.data.id}).catch(function(n){console.error(n)}),this.fetchComment(),this.isLike()},computed(){},methods:{..._({toDetail:"/"}),async postComment(){this.processing=!0,axios.defaults.headers.common.Authorization=`Bearer ${this.authorization.token}`,await axios.post("/api/comment",this.newcomment).then(({data:e})=>{this.validationErrors={},this.newcomment.body="",this.fetchComment()}).catch(e=>{console.error(e)}).finally(()=>{this.processing=!1})},async postLike(){this.processing=!0,axios.defaults.headers.common.Authorization=`Bearer ${this.authorization.token}`,this.postUrl="/api/post/like",await axios.post(this.postUrl,this.postLikeData).then(({data:e})=>{this.validationErrors={},this.liked=!this.liked}).catch(e=>{console.error(e)}).finally(()=>{this.processing=!1})},async postUnLike(){this.processing=!0,axios.defaults.headers.common.Authorization=`Bearer ${this.authorization.token}`,this.postUrl="/api/post/unlike",await axios.post(this.postUrl,this.postLikeData).then(({data:e})=>{this.validationErrors={},this.liked=!this.liked}).catch(e=>{console.error(e)}).finally(()=>{this.processing=!1})},async isLike(){this.processing=!0,axios.defaults.headers.common.Authorization=`Bearer ${this.authorization.token}`,this.postUrl="/api/post/islike",await axios.post(this.postUrl,this.postLikeData).then(({data:e})=>{this.validationErrors={},this.liked=e.data?!!e.data.is_liked:!1}).catch(e=>{console.error(e)}).finally(()=>{this.processing=!1})},async fetchComment(){this.processing=!0,this.postUrl="/api/comment/islike",axios.defaults.headers.common.Authorization=`Bearer ${this.authorization.token}`,await axios.post(this.postUrl,this.postLikeData).then(({data:e})=>{this.validationErrors={},this.comments=e.data.data}).catch(e=>{console.error(e)}).finally(()=>{this.processing=!1})},async commentLike(e){this.processing=!0,axios.defaults.headers.common.Authorization=`Bearer ${this.authorization.token}`,this.postUrl="/api/comment/like";const o={id:e};await axios.post(this.postUrl,o).then(({data:n})=>{this.validationErrors={},this.fetchComment()}).catch(n=>{console.error(n)}).finally(()=>{this.processing=!1})},async commentUnLike(e){this.processing=!0,axios.defaults.headers.common.Authorization=`Bearer ${this.authorization.token}`,this.postUrl="/api/comments/unlike";const o={id:e};await axios.post(this.postUrl,o).then(({data:n})=>{this.validationErrors={},this.fetchComment()}).catch(n=>{console.error(n)}).finally(()=>{this.processing=!1})}}},C={class:"mx-auto max-w-7xl py-6 sm:px-6 lg:px-8 items-center justify-center"},j={class:"bg-connectyed-body-light mx-full"},A={class:"mx-full shadow-connectyed rounded-xl bg-white border border-gray-200 flex flex-col py-5 px-5 mb-5"},B={class:"flex text-xs items-end"},D={time:"",datetime:"posts.created_at",class:"text-gray-500 float-end"},S={class:"group relative"},E={class:"my-5 text-3xl font-semibold leading-6 text-gray-900 group-hover:text-gray-600"},M={class:"my-5 text-sm leading-6"},T={class:"font-semibold text-gray-900"},V={href:"#"},N=t("span",{class:"absolute inset-0"},null,-1),q={class:"text-gray-600 px-3"},H=["innerHTML"],F={key:0,class:"col-md-2 offset-md-10"},I=["value"],P=t("button",{type:"submit",class:"bg-connectyed-button-dark hover:bg-connectyed-button-light text-connectyed-text-light font-bold py-1 px-4 rounded-r float-end rounded-sm"},"Like",-1),Y=["value"],G=t("button",{type:"submit",class:"bg-connectyed-button-dark hover:bg-connectyed-button-light text-connectyed-text-light font-bold py-1 px-4 rounded-r float-end rounded-sm"},"Liked",-1),J={key:1,class:"col-md-2 offset-md-10"},K={class:"bg-connectyed-button-dark hover:bg-connectyed-button-light text-connectyed-text-light font-bold py-1 px-4 rounded-r float-end rounded-sm"},O={class:"w-full max-w-2xl bg-white rounded-lg px-4 pt-2"},Q={class:"flex flex-wrap -mx-3 mb-6"},R={class:"px-4 pt-3 pb-2 text-gray-800 text-lg"},W={class:"w-full md:w-full px-3 m-2 mt-2"},X={class:"w-full md:w-full flex items-start md:w-full px-3"},Z={class:"items-start w-1/2 text-gray-700 px-2 mr-auto"},$={class:"text-xs md:text-sm pt-px"},tt={class:"w-full md:w-full items-end justify-end flex items-start md:w-full px-3"},et={class:"float-end"},st=["onSubmit"],ot=["value"],it=t("button",{type:"submit",class:"bg-connectyed-button-dark hover:bg-connectyed-button-light text-connectyed-text-light font-bold py-1 px-4 rounded-r float-end rounded-sm"},"Like",-1),nt=["onSubmit"],at=["value"],rt=t("button",{type:"submit",class:"bg-connectyed-button-dark hover:bg-connectyed-button-light text-connectyed-text-light font-bold py-1 px-4 rounded-r float-end rounded-sm"},"Liked",-1),lt={class:"flex mx-auto items-end justify-center shadow-lg mb-4 max-w-2xl"},dt={class:"flex flex-wrap -mx-3 mb-6"},ct=t("h2",{class:"w-full text-center px-4 pt-3 pb-2 text-gray-800 text-lg"},"Add a new comment",-1),mt={key:0,class:"w-full text-center bg-connectyed-button-white hover:bg-connectyed-button-dark hover:text-connectyed-text-light text-connectyed-text-dark font-bold py-1 px-4 rounded-r float-end rounded-sm"},ht={key:1,class:"w-full md:w-full px-3 mb-2 mt-2"},ut={key:2,class:"w-full md:w-full flex items-start md:w-full px-3"},pt=L('<div class="flex items-start w-1/2 text-gray-700 px-2 mr-auto"><svg fill="none" class="w-5 h-5 text-gray-600 mr-1" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class="text-xs md:text-sm pt-px">Some HTML is okay.</p></div><div class="-mr-1"><input type="submit" class="bg-white text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-100" value="Post Comment"></div>',2),ft=[pt];function xt(e,o,n,yt,s,c){const h=w("router-link");return r(),a("div",C,[t("div",j,[t("article",A,[t("div",B,[t("time",D,d(),1)]),t("div",S,[t("h2",E,d(s.posts.title),1),t("div",M,[t("p",T,[t("a",V,[N,m(" "+d(s.posts.name),1)]),t("span",q,"("+d(s.posts.role==="admin"?"Administrator":"Users")+")",1)])]),t("div",{class:"form-control text-xl my-5 text-justify",innerHTML:s.posts.content},null,8,H)]),s.user.name?(r(),a("div",F,[s.liked?l("",!0):(r(),a("form",{key:0,onSubmit:[o[0]||(o[0]=u((...i)=>e.submit&&e.submit(...i),["prevent"])),o[1]||(o[1]=i=>c.postLike(s.posts.id))],action:"javascript:void(0)",class:"row",method:"post"},[t("input",{type:"hidden",name:"_token",value:s.csrf},null,8,I),P],32)),s.liked?(r(),a("form",{key:1,onSubmit:[o[2]||(o[2]=u((...i)=>e.submit&&e.submit(...i),["prevent"])),o[3]||(o[3]=i=>c.postUnLike(s.posts.id))],action:"javascript:void(0)",class:"row",method:"post"},[t("input",{type:"hidden",name:"_token",value:s.csrf},null,8,Y),G],32)):l("",!0)])):l("",!0),s.user.name?l("",!0):(r(),a("div",J,[t("a",K,[p(h,{to:{name:"login"}},{default:f(()=>[m("Like")]),_:1})])]))]),(r(!0),a(g,null,b(s.comments,(i,x)=>(r(),a("div",{key:x,class:"flex mx-auto items-end justify-center shadow-lg mb-4 max-w-2xl"},[t("div",O,[t("div",Q,[t("h2",R,d(i.name),1),t("div",W,d(i.body),1),t("div",X,[t("div",Z,[t("p",$,d(i.date),1)])]),t("div",tt,[t("div",et,[!i.is_liked==1?(r(),a("form",{key:0,action:"javascript:void(0)",onSubmit:y=>c.commentLike(i.id),class:"row",method:"post"},[t("input",{type:"hidden",name:"_token",value:s.csrf},null,8,ot),it],40,st)):l("",!0),i.is_liked==1?(r(),a("form",{key:1,action:"javascript:void(0)",onSubmit:y=>c.commentUnLike(i.id),class:"row",method:"post"},[t("input",{type:"hidden",name:"_token",value:s.csrf},null,8,at),rt],40,nt)):l("",!0)])])])])]))),128)),t("div",lt,[t("form",{action:"javascript:void(0)",onSubmit:o[5]||(o[5]=(...i)=>c.postComment&&c.postComment(...i)),method:"post",class:"w-full max-w-2xl bg-white rounded-lg px-4 pt-2",name:"frmcomment",id:"frmcomment"},[t("div",dt,[ct,s.user.name?l("",!0):(r(),a("a",mt,[p(h,{to:{name:"login"}},{default:f(()=>[m("Login to comment")]),_:1})])),s.user.name?(r(),a("div",ht,[k(t("textarea",{class:"bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full h-20 py-2 px-3 font-medium placeholder-gray-700 focus:outline-none focus:bg-white",placeholder:"Type Your Comment",required:"","onUpdate:modelValue":o[4]||(o[4]=i=>s.newcomment.body=i),name:"body",id:"body"},null,512),[[v,s.newcomment.body]])])):l("",!0),s.user.name?(r(),a("div",ut,ft)):l("",!0)])],32)])])])}const bt=U(z,[["render",xt]]);export{bt as default};
